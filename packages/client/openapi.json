{"openapi":"3.1.0","info":{"title":"ISOK API","description":"Openapi of isok api","version":"0.1.0"},"paths":{"/ping":{"get":{"description":"Ping the api","operationId":"ping","responses":{"200":{"description":"PONG!","content":{"application/json":{"schema":{"type":"string"},"example":"PONG!"}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}}}},"/v1/register":{"post":{"tags":["auth"],"description":"Register user","operationId":"registerV1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Creds"}}},"required":true},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}}}},"/v1/auth":{"post":{"tags":["auth"],"description":"Authenticate","operationId":"authV1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Creds"}}},"required":true},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}}}},"/v1/checks/meta":{"get":{"tags":["checks"],"description":"Get checks' schema","operationId":"getChecksMetaV1","responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CheckSchema"}},"example":[{"inputs":[{"kind":{"default_value":null,"placeholder":"https://example.com","type":"Text","variant":"Url"},"title":"URL"}],"inputs_advanced":[{"kind":{"defaultValue":{"label":"GET","value":"GET"},"selectOptions":[{"label":"GET","value":"GET"},{"label":"POST","value":"POST"},{"label":"PUT","value":"PUT"},{"label":"DELETE","value":"DELETE"},{"label":"PATCH","value":"PATCH"},{"label":"HEAD","value":"HEAD"},{"label":"OPTIONS","value":"OPTIONS"},{"label":"CONNECT","value":"CONNECT"},{"label":"TRACE","value":"TRACE"}],"type":"Select"},"title":"Method"},{"kind":{"default_value":null,"placeholder":"{}","type":"Text","variant":"Area"},"title":"Body"},{"kind":{"defaultValue":{},"keyPlaceholder":"Key","type":"KeyValue","valuePlaceholder":"Value"},"title":"Headers"}],"type":"Http","version":1}]}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}}}},"/v1/users/me":{"get":{"tags":["users"],"description":"Get current user","operationId":"getMeV1","responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserView"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]},"delete":{"tags":["users"],"description":"Delete current user","operationId":"deleteMeV1","responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]},"patch":{"tags":["users"],"description":"Modify current user email/password","operationId":"editMeV1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PatchUser"}}},"required":true},"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/organisations":{"get":{"tags":["organisations"],"description":"List current user's organisations","operationId":"listOrgsV1","responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OrganisationSimpleView"}}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]},"post":{"tags":["organisations"],"description":"Create a new organisation","operationId":"createOrgV1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationInput"}}},"required":true},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string","format":"uuid"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]}},"/v1/organisations/{organisation_id}":{"get":{"tags":["organisations"],"description":"Get an organisation by id","operationId":"getOrgV1","parameters":[{"in":"path","name":"organisation_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationView"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]},"put":{"tags":["organisations"],"description":"Update an organisation name","operationId":"renameOrgV1","parameters":[{"in":"path","name":"organisation_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrganisationInput"}}},"required":true},"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]},"delete":{"tags":["organisations"],"description":"Delete a organisation","operationId":"deleteOrgV1","parameters":[{"in":"path","name":"organisation_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/organisations/{organisation_id}/members":{"post":{"tags":["organisations"],"description":"Add a member to an organisation","operationId":"addOrgMemberV1","parameters":[{"in":"path","name":"organisation_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"requestBody":{"content":{"application/json":{"schema":{"type":"string"}}},"required":true},"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/organisations/{organisation_id}/members/{user_id}":{"delete":{"tags":["organisations"],"description":"Remove a member from an organisation","operationId":"removeOrgMemberV1","parameters":[{"in":"path","name":"organisation_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"path","name":"user_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/checks/tenant/{tenant}":{"get":{"tags":["checks"],"description":"Get tenant's checks","operationId":"getChecksV1","parameters":[{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ApiCheck"}}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]},"post":{"tags":["checks"],"description":"Create check","operationId":"createCheckV1","parameters":[{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCheckInput"}}},"required":true},"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/checks/tenant/{tenant}/{check_id}":{"get":{"tags":["checks"],"description":"Get check","operationId":"getCheckV1","parameters":[{"in":"path","name":"check_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCheck"}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]},"put":{"tags":["checks"],"description":"Update check","operationId":"updateCheckV1","parameters":[{"in":"path","name":"check_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiCheckInput"}}},"required":true},"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]},"delete":{"tags":["checks"],"description":"Delete check","operationId":"deleteCheckV1","parameters":[{"in":"path","name":"check_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/checks/tenant/{tenant}/{check_id}/metrics":{"get":{"tags":["checks"],"description":"Get check's metrics","operationId":"getCheckMetricsV1","parameters":[{"in":"path","name":"check_id","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"query","name":"end","required":true,"schema":{"type":"string","format":"date-time"},"style":"form"},{"in":"query","name":"points","required":true,"schema":{"type":"integer","format":"uint","minimum":0.0},"style":"form"},{"in":"query","name":"start","required":true,"schema":{"type":"string","format":"date-time"},"style":"form"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/ApiCheckResult"},{"type":"null"}]}}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]}},"/v1/checks/tenant/{tenant}/summary":{"get":{"tags":["checks"],"description":"Get tenant's checks summary","operationId":"getChecksSummaryV1","parameters":[{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"},{"in":"query","name":"end","required":true,"schema":{"type":"string","format":"date-time"},"style":"form"},{"in":"query","name":"points","required":true,"schema":{"type":"integer","format":"uint","minimum":0.0},"style":"form"},{"in":"query","name":"start","required":true,"schema":{"type":"string","format":"date-time"},"style":"form"}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"array","items":{"anyOf":[{"$ref":"#/components/schemas/ApiCheckResult"},{"type":"null"}]}}}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]}},"/v1/checks/tenant/{tenant}/live":{"get":{"tags":["checks"],"description":"Get tenant's checks updates","operationId":"liveChecksV1","parameters":[{"in":"path","name":"tenant","required":true,"schema":{"type":"string","format":"uuid"},"style":"simple"}],"responses":{"204":{"description":"no content"}},"security":[{"UserAuth":[]}]}},"/v1/regions":{"get":{"tags":["regions"],"description":"Get regions","operationId":"getRegionsV1","responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Region"}}}}},"413":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}},"415":{"description":"plain text","content":{"text/plain; charset=utf-8":{}}}},"security":[{"UserAuth":[]}]}}},"components":{"securitySchemes":{"UserAuth":{"type":"http","scheme":"bearer","bearerFormat":"biscuit","description":"User token"}},"schemas":{"ApiCheck":{"type":"object","required":["id","interval","kind","name","tenant","zones"],"properties":{"id":{"type":"string","format":"uuid"},"interval":{"$ref":"#/components/schemas/Duration"},"kind":{"$ref":"#/components/schemas/CheckKind"},"name":{"type":"string"},"tenant":{"type":"string","format":"uuid"},"zones":{"type":"array","items":{"$ref":"#/components/schemas/CheckZone"}}}},"ApiCheckInput":{"type":"object","required":["interval","kind","name","zones"],"properties":{"interval":{"$ref":"#/components/schemas/Duration"},"kind":{"$ref":"#/components/schemas/CheckKind"},"name":{"$ref":"#/components/schemas/CheckName"},"zones":{"type":"array","items":{"$ref":"#/components/schemas/CheckZone"}}}},"ApiCheckResult":{"type":"object","required":["details","end","metrics","start","status"],"properties":{"details":{"$ref":"#/components/schemas/CheckResultDetails"},"end":{"type":"string","format":"date-time"},"error":{"type":["string","null"]},"metrics":{"$ref":"#/components/schemas/CheckMetrics"},"start":{"type":"string","format":"date-time"},"status":{"$ref":"#/components/schemas/ApiCheckStatus"}}},"ApiCheckStatus":{"type":"string","enum":["None","Reachable","Unreachable","ReachableUnreachable"]},"CheckKind":{"oneOf":[{"type":"object","required":["Http"],"properties":{"Http":{"$ref":"#/components/schemas/HttpCheck"}},"additionalProperties":false}]},"CheckMetrics":{"type":"object","required":["latency"],"properties":{"latency":{"$ref":"#/components/schemas/Duration"}}},"CheckName":{"type":"string","maxLength":64,"minLength":1},"CheckResultDetails":{"oneOf":[{"type":"object","required":["Http"],"properties":{"Http":{"$ref":"#/components/schemas/HttpCheckResult"}},"additionalProperties":false}]},"CheckSchema":{"type":"object","required":["inputs","inputs_advanced","type","version"],"properties":{"inputs":{"type":"array","items":{"$ref":"#/components/schemas/CheckSchemaInput"}},"inputs_advanced":{"type":"array","items":{"$ref":"#/components/schemas/CheckSchemaInput"}},"type":{"$ref":"#/components/schemas/CheckSchemaCheckKind"},"version":{"type":"integer","format":"uint","minimum":0.0}}},"CheckSchemaCheckKind":{"type":"string","enum":["Http"]},"CheckSchemaInput":{"type":"object","required":["kind","title"],"properties":{"kind":{"$ref":"#/components/schemas/CheckSchemaInputKind"},"title":{"type":"string"}}},"CheckSchemaInputKind":{"oneOf":[{"type":"object","required":["type","variant"],"properties":{"default_value":{"type":["string","null"]},"placeholder":{"type":["string","null"]},"type":{"type":"string","enum":["Text"]},"variant":{"$ref":"#/components/schemas/CheckSchemaTextInputVariant"}}},{"type":"object","required":["selectOptions","type"],"properties":{"defaultValue":{"anyOf":[{"$ref":"#/components/schemas/CheckSchemaSelectInputOption"},{"type":"null"}]},"selectOptions":{"type":"array","items":{"$ref":"#/components/schemas/CheckSchemaSelectInputOption"}},"type":{"type":"string","enum":["Select"]}}},{"type":"object","required":["defaultValue","type"],"properties":{"defaultValue":{"type":"object","additionalProperties":{"type":"string"}},"keyPlaceholder":{"type":["string","null"]},"type":{"type":"string","enum":["KeyValue"]},"valuePlaceholder":{"type":["string","null"]}}}]},"CheckSchemaSelectInputOption":{"type":"object","required":["label","value"],"properties":{"label":{"type":"string"},"value":{"type":"string"}}},"CheckSchemaTextInputVariant":{"type":"string","enum":["Text","Url","Area"]},"CheckZone":{"oneOf":[{"type":"string","enum":["All"]},{"type":"object","required":["Region"],"properties":{"Region":{"type":"string","format":"uuid"}},"additionalProperties":false},{"type":"object","required":["Zone"],"properties":{"Zone":{"type":"string","format":"uuid"}},"additionalProperties":false}]},"Creds":{"type":"object","required":["email","password"],"properties":{"email":{"$ref":"#/components/schemas/Email"},"password":{"$ref":"#/components/schemas/Password"}}},"Duration":{"type":"number","maximum":86400.0,"minimum":5.0},"Email":{"type":"string","format":"email","minLength":3},"HttpCheck":{"type":"object","required":["headers","method","url"],"properties":{"body":{"type":["string","null"]},"headers":{"type":"object","additionalProperties":{"type":"string"}},"method":{"type":"string"},"url":{"type":"string"}}},"HttpCheckResult":{"type":"object","required":["status_code"],"properties":{"status_code":{"type":"integer","format":"uint16","minimum":0.0}}},"MetricsFilter":{"type":"object","required":["end","points","start"],"properties":{"end":{"type":"string","format":"date-time"},"points":{"type":"integer","format":"uint","minimum":0.0},"start":{"type":"string","format":"date-time"}}},"OrgName":{"type":"string","maxLength":64,"minLength":1},"OrganisationInput":{"type":"object","required":["name"],"properties":{"name":{"$ref":"#/components/schemas/OrgName"}}},"OrganisationMemberPath":{"type":"object","required":["organisation_id","user_id"],"properties":{"organisation_id":{"type":"string","format":"uuid"},"user_id":{"type":"string","format":"uuid"}}},"OrganisationPath":{"type":"object","required":["organisation_id"],"properties":{"organisation_id":{"type":"string","format":"uuid"}}},"OrganisationSimpleView":{"type":"object","required":["id","name","tags"],"properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"tags":{"type":"object","additionalProperties":{"type":["string","null"]}}}},"OrganisationView":{"type":"object","required":["id","members","name","tags"],"properties":{"id":{"type":"string","format":"uuid"},"members":{"type":"array","items":{"$ref":"#/components/schemas/UserSimpleView"}},"name":{"type":"string"},"tags":{"type":"object","additionalProperties":{"type":["string","null"]}}}},"Password":{"type":"string","maxLength":128,"minLength":6},"PatchUser":{"type":"object","properties":{"email":{"anyOf":[{"$ref":"#/components/schemas/Email"},{"type":"null"}]},"password":{"anyOf":[{"$ref":"#/components/schemas/Password"},{"type":"null"}]}}},"Region":{"type":"object","required":["id","name","tags","zones"],"properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"tags":{"type":"object","additionalProperties":{"type":["string","null"]}},"zones":{"type":"array","items":{"$ref":"#/components/schemas/Zone"}}}},"TenantCheckPath":{"type":"object","required":["check_id","tenant"],"properties":{"check_id":{"type":"string","format":"uuid"},"tenant":{"type":"string","format":"uuid"}}},"TenantPath":{"type":"object","required":["tenant"],"properties":{"tenant":{"type":"string","format":"uuid"}}},"Token":{"type":"object","required":["token","user_id"],"properties":{"token":{"type":"string"},"user_id":{"type":"string","format":"uuid"}}},"UserSimpleView":{"type":"object","required":["email","id"],"properties":{"email":{"type":"string"},"id":{"type":"string","format":"uuid"}}},"UserView":{"type":"object","required":["email","id","tags"],"properties":{"email":{"type":"string"},"id":{"type":"string","format":"uuid"},"tags":{"type":"object","additionalProperties":{"type":["string","null"]}}}},"Zone":{"type":"object","required":["id","name","tags"],"properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string"},"tags":{"type":"object","additionalProperties":{"type":["string","null"]}}}}}}}